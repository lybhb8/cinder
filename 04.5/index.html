<!DOCTYPE html><html lang=en> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=description content="A clean, MkDocs theme <Cinder> for 《Go入门指南》"><meta name=author content="Christopher Simpkins"><link href=http://blowmoldingshare.cn/cinder/04.5/ rel=canonical><link rel="shortcut icon" href=../img/favicon.ico><title>4.5 基本类型和运算符 - 《Go入门指南》</title><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.12.0/css/all.css><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.12.0/css/v4-shims.css><link rel=stylesheet href=//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.min.css><link href=//rsms.me/inter/inter.css rel=stylesheet type=text/css><link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin" rel=stylesheet type=text/css><link href=../css/bootstrap-custom.min.css rel=stylesheet><link href=../css/base.min.css rel=stylesheet><link href=../css/cinder.min.css rel=stylesheet><link rel=stylesheet href=//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/styles/github.min.css><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries --><!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]--></head> <body> <div class="navbar navbar-default navbar-fixed-top" role=navigation> <div class=container> <!-- Collapsed navigation --> <div class=navbar-header> <!-- Expander button --> <button type=button class=navbar-toggle data-toggle=collapse data-target=.navbar-collapse> <span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <!-- Main title --> <a class=navbar-brand href=..>《Go入门指南》</a> </div> <!-- Expanded navigation --> <div class="navbar-collapse collapse"> <!-- Main navigation --> <ul class="nav navbar-nav"> <li> <a href=..>Home</a> </li> <li> <a href=../preface/ >前言</a> </li> <li class=dropdown> <a href=# class=dropdown-toggle data-toggle=dropdown>学习 Go 语言 <b class=caret></b></a> <ul class=dropdown-menu> <li class=dropdown-submenu> <a tabindex=-1 href>第1章Go 语言的起源，发展与普及</a> <ul class=dropdown-menu> <li> <a href=../01.1/ >1.1 起源与发展</a> </li> <li> <a href=../01.2/ >1.2 语言的主要特性与发展的环境和影响因素</a> </li> </ul> </li> <li class=dropdown-submenu> <a tabindex=-1 href>第2章 安装与运行环境</a> <ul class=dropdown-menu> <li> <a href=../02.1/ >2.1 平台与架构</a> </li> <li> <a href=../02.2/ >2.2 Go 环境变量</a> </li> <li> <a href=../02.3/ >2.3 在 Linux 上安装 Go</a> </li> <li> <a href=../02.4/ >2.4 在 Mac OS X 上安装 Go</a> </li> <li> <a href=../02.5/ >2.5 在 Windows 上安装 Go</a> </li> <li> <a href=../02.6/ >2.6 安装目录清单</a> </li> <li> <a href=../02.7/ >2.7 Go 运行时(runtime</a> </li> <li> <a href=../02.8/ >2.8 Go 解释器</a> </li> </ul> </li> <li class=dropdown-submenu> <a tabindex=-1 href>第3章 编辑器 集成开发环境与其它工具</a> <ul class=dropdown-menu> <li> <a href=../03.0/ >3.0 编辑器、集成开发环境与其它工具</a> </li> <li> <a href=../03.1/ >3.1 Go 开发环境的基本要求</a> </li> <li> <a href=../03.2/ >3.2 编辑器和集成开发环境</a> </li> <li> <a href=../03.3/ >3.3 调试器</a> </li> <li> <a href=../03.4/ >3.4 构建并运行 Go 程序</a> </li> <li> <a href=../03.5/ >3.5 格式化代码</a> </li> <li> <a href=../03.6/ >3.6 生成代码文档</a> </li> <li> <a href=../03.7/ >3.7 其它工具</a> </li> <li> <a href=../03.8/ >3.8 Go 性能说明</a> </li> <li> <a href=../03.9/ >3.9 与其它语言进行交互</a> </li> </ul> </li> </ul> </li> <li class="dropdown active"> <a href=# class=dropdown-toggle data-toggle=dropdown>语言的核心结构与技术 <b class=caret></b></a> <ul class=dropdown-menu> <li class=dropdown-submenu> <a tabindex=-1 href>第4章 基本结构和基本数据类型</a> <ul class=dropdown-menu> <li> <a href=../04.1/ >4.1 文件名、关键字与标识符</a> </li> <li> <a href=../04.2/ >4.2 Go 程序的基本结构和要素</a> </li> <li> <a href=../04.3/ >4.3 常量</a> </li> <li> <a href=../04.4/ >4.4 变量</a> </li> <li class=active> <a href=./ >4.5 基本类型和运算符</a> </li> <li> <a href=../04.6/ >4.6 字符串</a> </li> <li> <a href=../04.7/ >4.7 strings 和 strconv 包</a> </li> <li> <a href=../04.8/ >4.8 时间和日期</a> </li> <li> <a href=../04.9/ >4.9 指针</a> </li> </ul> </li> <li class=dropdown-submenu> <a tabindex=-1 href>第5章 控制结构</a> <ul class=dropdown-menu> <li> <a href=../05.0/ >5.0 控制结构</a> </li> <li> <a href=../05.1/ >5.1 if-else 结构</a> </li> <li> <a href=../05.2/ >5.2 测试多返回值函数的错误</a> </li> <li> <a href=../05.3/ >5.3 switch 结构</a> </li> <li> <a href=../05.4/ >5.4 for 结构</a> </li> <li> <a href=../05.5/ >5.5 Break 与 continue</a> </li> <li> <a href=../05.6/ >5.6 标签与 goto</a> </li> </ul> </li> <li class=dropdown-submenu> <a tabindex=-1 href>第6章 函数（function）</a> <ul class=dropdown-menu> <li> <a href=../06.0/ >6.0 函数 (function)</a> </li> <li> <a href=../06.1/ >6.1 介绍</a> </li> <li> <a href=../06.2/ >6.2 函数参数与返回值</a> </li> <li> <a href=../06.3/ >6.3 传递变长参数</a> </li> <li> <a href=../06.4/ >6.4 defer 和追踪</a> </li> <li> <a href=../06.5/ >6.5 内置函数</a> </li> <li> <a href=../06.6/ >6.6 递归函数</a> </li> <li> <a href=../06.7/ >6.7 将函数作为参数</a> </li> <li> <a href=../06.8/ >6.8 闭包</a> </li> <li> <a href=../06.9/ >6.9 应用闭包 将函数作为返回值</a> </li> <li> <a href=../06.10/ >6.10 使用闭包调试</a> </li> <li> <a href=../06.11/ >6.11 计算函数执行时间</a> </li> <li> <a href=../06.12/ >6.12 通过内存缓存来提升性能</a> </li> </ul> </li> <li class=dropdown-submenu> <a tabindex=-1 href>第7章 数组与切片</a> <ul class=dropdown-menu> <li> <a href=../07.0/ >7.0 数组与切片</a> </li> <li> <a href=../07.1/ >7.1 声明和初始化</a> </li> <li> <a href=../07.2/ >7.2 切片</a> </li> <li> <a href=../07.3/ >7.3 For-range 结构</a> </li> <li> <a href=../07.4/ >7.4 切片重组（reslice）</a> </li> <li> <a href=../07.5/ >7.5 切片的复制与追加</a> </li> <li> <a href=../07.6/ >7.6 字符串、数组和切片的应用</a> </li> </ul> </li> <li class=dropdown-submenu> <a tabindex=-1 href>第8章 Map</a> <ul class=dropdown-menu> <li> <a href=../08.0/ >8.0 Map</a> </li> <li> <a href=../08.1/ >8.1 声明、初始化和 make</a> </li> <li> <a href=../08.2/ >8.2 测试键值对是否存在及删除元素</a> </li> <li> <a href=../08.3/ >8.3 for-range 的配套用法</a> </li> <li> <a href=../08.4/ >8.4 map 类型的切片</a> </li> <li> <a href=../08.5/ >8.5 map 的排序</a> </li> <li> <a href=../08.6/ >8.6 将 map 的键值对调</a> </li> </ul> </li> <li class=dropdown-submenu> <a tabindex=-1 href>第9章 包（package）</a> <ul class=dropdown-menu> <li> <a href=../09.0/ >9.0 包 (package)</a> </li> <li> <a href=../09.1/ >9.1 标准库概述</a> </li> <li> <a href=../09.2/ >9.2 regexp 包</a> </li> <li> <a href=../09.3/ >9.3 锁和 sync 包</a> </li> <li> <a href=../09.4/ >9.4 精密计算和 big 包</a> </li> <li> <a href=../09.5/ >9.5 自定义包和可见性</a> </li> <li> <a href=../09.6/ >9.6 为自定义包使用 godoc</a> </li> <li> <a href=../09.7/ >9.7 使用 go install 安装自定义包</a> </li> <li> <a href=../09.8/ >9.8 自定义包的目录结构、go install 和 go test</a> </li> <li> <a href=../09.9/ >9.9 通过 Git 打包和安装</a> </li> <li> <a href=../09.10/ >9.10 Go 的外部包和项目</a> </li> <li> <a href=../09.11/ >9.11 在 Go 程序中使用外部库</a> </li> </ul> </li> <li class=dropdown-submenu> <a tabindex=-1 href>第10章 结构（struct）与方法（method）</a> <ul class=dropdown-menu> <li> <a href=../10.0/ >10.0 结构 (struct) 与方法 (method)</a> </li> <li> <a href=../10.1/ >10.1 结构体定义</a> </li> <li> <a href=../10.2/ >10.2 使用工厂方法创建结构体实例</a> </li> <li> <a href=../10.3/ >10.3 使用自定义包中的结构体</a> </li> <li> <a href=../10.4/ >10.4 带标签的结构体</a> </li> <li> <a href=../10.5/ >10.5 匿名字段和内嵌结构体</a> </li> <li> <a href=../10.6/ >10.6 方法</a> </li> <li> <a href=../10.7/ >10.7 类型的 String( 方法和格式化描述符</a> </li> <li> <a href=../10.8/ >10.8 垃圾回收和 SetFinalizer</a> </li> </ul> </li> <li class=dropdown-submenu> <a tabindex=-1 href>第11章 接口（interface）与反射（reflection）</a> <ul class=dropdown-menu> <li> <a href=../11.0/ >11.0 接口 (interface)与反射 (reflection)</a> </li> <li> <a href=../11.1/ >11.1 接口是什么</a> </li> <li> <a href=../11.2/ >11.2 接口嵌套接口</a> </li> <li> <a href=../11.3/ >11.3 类型断言 如何检测和转换接口变量的类型</a> </li> <li> <a href=../11.4/ >11.4 类型判断 type-switch</a> </li> <li> <a href=../11.5/ >11.5 测试一个值是否实现了某个接口</a> </li> <li> <a href=../11.6/ >11.6 使用方法集与接口</a> </li> <li> <a href=../11.7/ >11.7 第一个例子 使用 Sorter 接口排序</a> </li> <li> <a href=../11.8/ >11.8 第二个例子 读和写</a> </li> <li> <a href=../11.9/ >11.9 空接口</a> </li> <li> <a href=../11.10/ >11.10 反射包</a> </li> <li> <a href=../11.11/ >11.11 Printf 和反射</a> </li> <li> <a href=../11.12/ >11.12 接口与动态类型</a> </li> <li> <a href=../11.13/ >11.13 总结 Go 中的面向对象</a> </li> <li> <a href=../11.14/ >11.14 结构体、集合和高阶函数</a> </li> </ul> </li> </ul> </li> <li class=dropdown> <a href=# class=dropdown-toggle data-toggle=dropdown>Go 高级编程 <b class=caret></b></a> <ul class=dropdown-menu> <li class=dropdown-submenu> <a tabindex=-1 href>第12章 读写数据</a> <ul class=dropdown-menu> <li> <a href=../12.0/ >12.0 读写数据</a> </li> <li> <a href=../12.1/ >12.1 读取用户的输入</a> </li> <li> <a href=../12.2/ >12.2 文件读写</a> </li> <li> <a href=../12.3/ >12.3 文件拷贝</a> </li> <li> <a href=../12.4/ >12.4 从命令行读取参数</a> </li> <li> <a href=../12.5/ >12.5 用 buffer 读取文件</a> </li> <li> <a href=../12.6/ >12.6 用切片读写文件</a> </li> <li> <a href=../12.7/ >12.7 用 defer 关闭文件</a> </li> <li> <a href=../12.8/ >12.8 使用接口的实际例子 fmt.Fprintf</a> </li> <li> <a href=../12.9/ >12.9 格式化 JSON 数据</a> </li> <li> <a href=../12.10/ >12.10 XML 数据格式</a> </li> <li> <a href=../12.11/ >12.11 用 Gob 传输数据</a> </li> <li> <a href=../12.12/ >12.12 Go 中的密码学</a> </li> </ul> </li> <li class=dropdown-submenu> <a tabindex=-1 href>第13章 错误处理与测试</a> <ul class=dropdown-menu> <li> <a href=../13.0/ >13.0 错误处理与测试</a> </li> <li> <a href=../13.1/ >13.1 错误处理</a> </li> <li> <a href=../13.2/ >13.2 运行时异常和 panic</a> </li> <li> <a href=../13.3/ >13.3 从 panic 中恢复（Recover）</a> </li> <li> <a href=../13.4/ >13.4 自定义包中的错误处理和 panicking</a> </li> <li> <a href=../13.5/ >13.5 一种用闭包处理错误的模式</a> </li> <li> <a href=../13.6/ >13.6 启动外部命令和程序</a> </li> <li> <a href=../13.7/ >13.7 Go 中的单元测试和基准测试</a> </li> <li> <a href=../13.8/ >13.8 测试的具体例子</a> </li> <li> <a href=../13.9/ >13.9 用（测试数据）表驱动测试</a> </li> <li> <a href=../13.10/ >13.10 性能调试 分析并优化 Go 程序</a> </li> </ul> </li> </ul> </li> </ul> <ul class="nav navbar-nav navbar-right"> <li> <a href=# data-toggle=modal data-target=#mkdocs_search_modal> <i class="fas fa-search"></i> Search </a> </li> <li> <a href=../04.4/ rel=prev> <i class="fas fa-arrow-left"></i> Previous </a> </li> <li> <a href=../04.6/ rel=next> Next <i class="fas fa-arrow-right"></i> </a> </li> <li> <a href=https://github.com/lybhb8/cinder/edit/master/docs/04.5.md><i class="fab fa-github"></i> Edit on GitHub</a> </li> </ul> </div> </div> </div> <div class=container> <div class=col-md-3><div class="bs-sidebar hidden-print affix well" role=complementary> <ul class="nav bs-sidenav"> <li class="first-level active"><a href=#45>4.5 基本类型和运算符</a></li> <li class=second-level><a href=#451-bool>4.5.1 布尔类型 bool</a></li> <li class=second-level><a href=#452>4.5.2 数字类型</a></li> <li class=third-level><a href=#4521-int-float>4.5.2.1 整型 int 和浮点型 float</a></li> <li class=third-level><a href=#4522>4.5.2.2 复数</a></li> <li class=third-level><a href=#4523>4.5.2.3 位运算</a></li> <li class=third-level><a href=#4524>4.5.2.4 逻辑运算符</a></li> <li class=third-level><a href=#4525>4.5.2.5 算术运算符</a></li> <li class=third-level><a href=#4526>4.5.2.6 随机数</a></li> <li class=second-level><a href=#453>4.5.3 运算符与优先级</a></li> <li class=second-level><a href=#454>4.5.4 类型别名</a></li> <li class=second-level><a href=#455>4.5.5 字符类型</a></li> <li class=second-level><a href=#_1>链接</a></li> </ul> </div></div> <div class=col-md-9 role=main> <h1 id=45>4.5 基本类型和运算符<a class=headerlink href=#45 title="Permanent link">&para;</a></h1> <p>我们将在这个部分讲解有关布尔型、数字型和字符型的相关知识。</p> <p>表达式是一种特定的类型的值，它可以由其它的值以及运算符组合而成。每个类型都定义了可以和自己结合的运算符集合，如果你使用了不在这个集合中的运算符，则会在编译时获得编译错误。</p> <p>一元运算符只可以用于一个值的操作（作为后缀），而二元运算符则可以和两个值或者操作数结合（作为中缀）。</p> <p>只有两个类型相同的值才可以和二元运算符结合，另外要注意的是，Go 是强类型语言，因此不会进行隐式转换，任何不同类型之间的转换都必须显式说明（第 4.2 节）。Go 不存在像 C 那样的运算符重载，表达式的解析顺序是从左至右。</p> <p>你可以在第 4.5.3 节找到有关运算符优先级的相关信息，优先级越高的运算符在条件相同的情况下将被优先执行。但是你可以通过使用括号将其中的表达式括起来，以人为地提升某个表达式的运算优先级。</p> <h2 id=451-bool>4.5.1 布尔类型 bool<a class=headerlink href=#451-bool title="Permanent link">&para;</a></h2> <p>一个简单的例子：<code>var b bool = true</code>。</p> <p>布尔型的值只可以是常量 true 或者 false。</p> <p>两个类型相同的值可以使用相等 <code>==</code> 或者不等 <code>!=</code> 运算符来进行比较并获得一个布尔型的值。</p> <p>当相等运算符两边的值是完全相同的值的时候会返回 <code>true</code>，否则返回 <code>false</code>，并且只有在两个的值的类型相同的情况下才可以使用。</p> <p>示例：</p> <div class="language-go highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=kd>var</span><span class=w> </span><span class=nx>aVar</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=mi>10</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=nx>aVar</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>5</span><span class=w> </span><span class=o>-</span><span class=p>&gt;</span><span class=w> </span><span class=kc>false</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=nx>aVar</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>10</span><span class=w> </span><span class=o>-</span><span class=p>&gt;</span><span class=w> </span><span class=kc>true</span>
</span></code></pre></div> <p>当不等运算符两边的值是不同的时候会返回 <code>true</code>，否则返回 <code>false</code>。</p> <p>示例：</p> <div class="language-go highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=kd>var</span><span class=w> </span><span class=nx>aVar</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=mi>10</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=nx>aVar</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=mi>5</span><span class=w> </span><span class=o>-</span><span class=p>&gt;</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=nx>aVar</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=mi>10</span><span class=w> </span><span class=o>-</span><span class=p>&gt;</span><span class=w> </span><span class=kc>false</span>
</span></code></pre></div> <p>Go 对于值之间的比较有非常严格的限制，只有两个类型相同的值才可以进行比较，如果值的类型是接口（interface，<a href=../11.0/ >第 11 章</a>），它们也必须都实现了相同的接口。如果其中一个值是常量，那么另外一个值的类型必须和该常量类型相兼容的。如果以上条件都不满足，则其中一个值的类型必须在被转换为和另外一个值的类型相同之后才可以进行比较。</p> <p>布尔型的常量和变量也可以通过和逻辑运算符（非 <code>!</code>、与 <code>&amp;&amp;</code>、或 <code>||</code>）结合来产生另外一个布尔值，这样的逻辑语句就其本身而言，并不是一个完整的 Go 语句。</p> <p>逻辑值可以被用于条件结构中的条件语句（<a href=../05.0/ >第 5 章</a>），以便测试某个条件是否满足。另外，与 <code>&amp;&amp;</code>、或 <code>||</code> 与相等 <code>==</code> 或不等 <code>!=</code> 属于二元运算符，而非 <code>!</code> 属于一元运算符。在接下来的内容中，我们会使用 T 来代表条件符合的语句，用 F 来代表条件不符合的语句。</p> <p>Go 语言中包含以下逻辑运算符：</p> <p>非运算符：<code>!</code></p> <div class="language-go highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=p>!</span><span class=nx>T</span><span class=w> </span><span class=o>-</span><span class=p>&gt;</span><span class=w> </span><span class=kc>false</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=p>!</span><span class=nx>F</span><span class=w> </span><span class=o>-</span><span class=p>&gt;</span><span class=w> </span><span class=kc>true</span>
</span></code></pre></div> <p>非运算符用于取得和布尔值相反的结果。</p> <p>与运算符：<code>&amp;&amp;</code></p> <div class="language-go highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=nx>T</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>T</span><span class=w> </span><span class=o>-</span><span class=p>&gt;</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=nx>T</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>F</span><span class=w> </span><span class=o>-</span><span class=p>&gt;</span><span class=w> </span><span class=kc>false</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=nx>F</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>T</span><span class=w> </span><span class=o>-</span><span class=p>&gt;</span><span class=w> </span><span class=kc>false</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=nx>F</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>F</span><span class=w> </span><span class=o>-</span><span class=p>&gt;</span><span class=w> </span><span class=kc>false</span>
</span></code></pre></div> <p>只有当两边的值都为 <code>true</code> 的时候，和运算符的结果才是 <code>true</code>。</p> <p>或运算符：<code>||</code></p> <div class="language-go highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=nx>T</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=nx>T</span><span class=w> </span><span class=o>-</span><span class=p>&gt;</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=nx>T</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=nx>F</span><span class=w> </span><span class=o>-</span><span class=p>&gt;</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=nx>F</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=nx>T</span><span class=w> </span><span class=o>-</span><span class=p>&gt;</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=nx>F</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=nx>F</span><span class=w> </span><span class=o>-</span><span class=p>&gt;</span><span class=w> </span><span class=kc>false</span>
</span></code></pre></div> <p>只有当两边的值都为 <code>false</code> 的时候，或运算符的结果才是 <code>false</code>，其中任意一边的值为 <code>true</code> 就能够使得该表达式的结果为 <code>true</code>。</p> <p>在 Go 语言中，<code>&amp;&amp;</code> 和 <code>||</code> 是具有快捷性质的运算符，当运算符左边表达式的值已经能够决定整个表达式的值的时候（<code>&amp;&amp;</code> 左边的值为 <code>false</code>，<code>||</code> 左边的值为 <code>true</code>），运算符右边的表达式将不会被执行。利用这个性质，如果你有多个条件判断，应当将计算过程较为复杂的表达式放在运算符的右侧以减少不必要的运算。</p> <p>利用括号同样可以升级某个表达式的运算优先级。</p> <p>在格式化输出时，你可以使用 <code>%t</code> 来表示你要输出的值为布尔型。</p> <p>布尔值（以及任何结果为布尔值的表达式）最常用在条件结构的条件语句中，例如：if、for 和 switch 结构（第 5 章）。</p> <p>对于布尔值的好的命名能够很好地提升代码的可读性，例如以 <code>is</code> 或者 <code>Is</code> 开头的 <code>isSorted</code>、<code>isFinished</code>、<code>isVisible</code>，使用这样的命名能够在阅读代码的获得阅读正常语句一样的良好体验，例如标准库中的 <code>unicode.IsDigit(ch)</code>（<a href=./ >第 4.5.5 节</a>）。</p> <h2 id=452>4.5.2 数字类型<a class=headerlink href=#452 title="Permanent link">&para;</a></h2> <h3 id=4521-int-float>4.5.2.1 整型 int 和浮点型 float<a class=headerlink href=#4521-int-float title="Permanent link">&para;</a></h3> <p>Go 语言支持整型和浮点型数字，并且原生支持复数，其中位的运算采用补码（详情参见 <a href="http://en.wikipedia.org/wiki/Two's_complement">二的补码</a> 页面）。</p> <p>Go 也有基于架构的类型，例如：<code>int</code>、<code>uint</code> 和 <code>uintptr</code>。</p> <p>这些类型的长度都是根据运行程序所在的操作系统类型所决定的：</p> <ul> <li><code>int</code> 和 <code>uint</code> 在 32 位操作系统上，它们均使用 32 位（4 个字节），在 64 位操作系统上，它们均使用 64 位（8 个字节）。</li> <li><code>uintptr</code> 的长度被设定为足够存放一个指针即可。</li> </ul> <p>Go 语言中没有 float 类型。（Go语言中只有 <code>float32</code> 和 <code>float64</code>）没有 double 类型。</p> <p>与操作系统架构无关的类型都有固定的大小，并在类型的名称中就可以看出来：</p> <p>整数：</p> <ul> <li><code>int8</code>（-128 -&gt; 127）</li> <li><code>int16</code>（-32768 -&gt; 32767）</li> <li><code>int32</code>（-2,147,483,648 -&gt; 2,147,483,647）</li> <li><code>int64</code>（-9,223,372,036,854,775,808 -&gt; 9,223,372,036,854,775,807）</li> </ul> <p>无符号整数：</p> <ul> <li><code>uint8</code>（0 -&gt; 255）</li> <li><code>uint16</code>（0 -&gt; 65,535）</li> <li><code>uint32</code>（0 -&gt; 4,294,967,295）</li> <li><code>uint64</code>（0 -&gt; 18,446,744,073,709,551,615）</li> </ul> <p>浮点型（IEEE-754 标准）：</p> <ul> <li><code>float32</code>（+- 1e-45 -&gt; +- 3.4 * 1e38）</li> <li><code>float64</code>（+- 5 * 1e-324 -&gt; 107 * 1e308）</li> </ul> <p><code>int</code> 型是计算最快的一种类型。</p> <p>整型的零值为 <code>0</code>，浮点型的零值为 <code>0.0</code>。</p> <p><code>float32</code> 精确到小数点后 7 位，<code>float64</code> 精确到小数点后 15 位。由于精确度的缘故，你在使用 <code>==</code> 或者 <code>!=</code> 来比较浮点数时应当非常小心。你最好在正式使用前测试对于精确度要求较高的运算。</p> <p>你应该尽可能地使用 <code>float64</code>，因为 <code>math</code> 包中所有有关数学运算的函数都会要求接收这个类型。</p> <p>你可以通过增加前缀 0 来表示 8 进制数（如：077），增加前缀 0x 来表示 16 进制数（如：<code>0xFF</code>），以及使用 <code>e</code> 来表示 10 的连乘（如： 1e3 = 1000，或者 6.022e23 = 6.022 x 1e23）。</p> <p>你可以使用 <code>a := uint64(0)</code> 来同时完成类型转换和赋值操作，这样 <code>a</code> 的类型就是 <code>uint64</code>。</p> <p>Go 中不允许不同类型之间的混合使用，但是对于常量的类型限制非常少，因此允许常量之间的混合使用，下面这个程序很好地解释了这个现象（该程序无法通过编译）：</p> <p>示例 4.8 <a href=../examples/chapter_4/type_mixing.go>type_mixing.go</a></p> <div class="language-go highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=kn>package</span><span class=w> </span><span class=nx>main</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=kd>func</span><span class=w> </span><span class=nx>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=w>    </span><span class=kd>var</span><span class=w> </span><span class=nx>a</span><span class=w> </span><span class=kt>int</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=w>    </span><span class=kd>var</span><span class=w> </span><span class=nx>b</span><span class=w> </span><span class=kt>int32</span>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=w>    </span><span class=nx>a</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=mi>15</span>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a><span class=w>    </span><span class=nx>b</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=nx>a</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>a</span><span class=w>    </span><span class=c1>// 编译错误</span>
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=w>    </span><span class=nx>b</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=nx>b</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>5</span><span class=w>    </span><span class=c1>// 因为 5 是常量，所以可以通过编译</span>
</span><span id=__span-5-9><a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a><span class=p>}</span>
</span></code></pre></div> <p>如果你尝试编译该程序，则将得到编译错误 <code>cannot use a + a (type int) as type int32 in assignment</code>。</p> <p>同样地，<code>int16</code> 也不能够被隐式转换为 <code>int32</code>。</p> <p>下面这个程序展示了通过显式转换来避免这个问题（<a href=../04.2/ >第 4.2 节</a>）。</p> <p>示例 4.9 <a href=../examples/chapter_4/casting.go>casting.go</a></p> <div class="language-go highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=kn>package</span><span class=w> </span><span class=nx>main</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=kn>import</span><span class=w> </span><span class=s>&quot;fmt&quot;</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=kd>func</span><span class=w> </span><span class=nx>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=w>    </span><span class=kd>var</span><span class=w> </span><span class=nx>n</span><span class=w> </span><span class=kt>int16</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=mi>34</span>
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=w>    </span><span class=kd>var</span><span class=w> </span><span class=nx>m</span><span class=w> </span><span class=kt>int32</span>
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a><span class=w>    </span><span class=c1>// compiler error: cannot use n (type int16) as type int32 in assignment</span>
</span><span id=__span-6-9><a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a><span class=w>    </span><span class=c1>//m = n</span>
</span><span id=__span-6-10><a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a><span class=w>    </span><span class=nx>m</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=nb>int32</span><span class=p>(</span><span class=nx>n</span><span class=p>)</span>
</span><span id=__span-6-11><a id=__codelineno-6-11 name=__codelineno-6-11 href=#__codelineno-6-11></a>
</span><span id=__span-6-12><a id=__codelineno-6-12 name=__codelineno-6-12 href=#__codelineno-6-12></a><span class=w>    </span><span class=nx>fmt</span><span class=p>.</span><span class=nx>Printf</span><span class=p>(</span><span class=s>&quot;32 bit int is: %d\n&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>m</span><span class=p>)</span>
</span><span id=__span-6-13><a id=__codelineno-6-13 name=__codelineno-6-13 href=#__codelineno-6-13></a><span class=w>    </span><span class=nx>fmt</span><span class=p>.</span><span class=nx>Printf</span><span class=p>(</span><span class=s>&quot;16 bit int is: %d\n&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>n</span><span class=p>)</span>
</span><span id=__span-6-14><a id=__codelineno-6-14 name=__codelineno-6-14 href=#__codelineno-6-14></a><span class=p>}</span>
</span></code></pre></div> <p>输出：</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a>32 bit int is: 34
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a>16 bit int is: 34
</span></code></pre></div> <p><strong>格式化说明符</strong></p> <p>在格式化字符串里，<code>%d</code> 用于格式化整数（<code>%x</code> 和 <code>%X</code> 用于格式化 16 进制表示的数字），<code>%g</code> 用于格式化浮点型（<code>%f</code> 输出浮点数，<code>%e</code> 输出科学计数表示法），<code>%0nd</code> 用于规定输出长度为 n 的整数，其中开头的数字 0 是必须的。</p> <p><code>%n.mg</code> 用于表示数字 n 并精确到小数点后 m 位，除了使用 g 之外，还可以使用 e 或者 f，例如：使用格式化字符串 <code>%5.2e</code> 来输出 3.4 的结果为 <code>3.40e+00</code>。</p> <p><strong>数字值转换</strong></p> <p>当进行类似 <code>a32bitInt = int32(a32Float)</code> 的转换时，小数点后的数字将被丢弃。这种情况一般发生当从取值范围较大的类型转换为取值范围较小的类型时，或者你可以写一个专门用于处理类型转换的函数来确保没有发生精度的丢失。下面这个例子展示如何安全地从 <code>int</code> 型转换为 <code>int8</code>：</p> <div class="language-go highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=kd>func</span><span class=w> </span><span class=nx>Uint8FromInt</span><span class=p>(</span><span class=nx>n</span><span class=w> </span><span class=kt>int</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=kt>uint8</span><span class=p>,</span><span class=w> </span><span class=kt>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=nx>n</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>n</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=nx>math</span><span class=p>.</span><span class=nx>MaxUint8</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=c1>// conversion is safe</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=nb>uint8</span><span class=p>(</span><span class=nx>n</span><span class=p>),</span><span class=w> </span><span class=kc>nil</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=nx>fmt</span><span class=p>.</span><span class=nx>Errorf</span><span class=p>(</span><span class=s>&quot;%d is out of the uint8 range&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>n</span><span class=p>)</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a><span class=p>}</span>
</span></code></pre></div> <p>或者安全地从 <code>float64</code> 转换为 <code>int</code>：</p> <div class="language-go highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=kd>func</span><span class=w> </span><span class=nx>IntFromFloat64</span><span class=p>(</span><span class=nx>x</span><span class=w> </span><span class=kt>float64</span><span class=p>)</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=nx>math</span><span class=p>.</span><span class=nx>MinInt32</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=nx>x</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>x</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=nx>math</span><span class=p>.</span><span class=nx>MaxInt32</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=c1>// x lies in the integer range</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=w>        </span><span class=nx>whole</span><span class=p>,</span><span class=w> </span><span class=nx>fraction</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>math</span><span class=p>.</span><span class=nx>Modf</span><span class=p>(</span><span class=nx>x</span><span class=p>)</span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=nx>fraction</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=mf>0.5</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a><span class=w>            </span><span class=nx>whole</span><span class=o>++</span>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=nb>int</span><span class=p>(</span><span class=nx>whole</span><span class=p>)</span>
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-9-9><a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a><span class=w>    </span><span class=nb>panic</span><span class=p>(</span><span class=nx>fmt</span><span class=p>.</span><span class=nx>Sprintf</span><span class=p>(</span><span class=s>&quot;%g is out of the int32 range&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>x</span><span class=p>))</span>
</span><span id=__span-9-10><a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a><span class=p>}</span>
</span></code></pre></div> <p>不过如果你实际存的数字超出你要转换到的类型的取值范围的话，则会引发 <code>panic</code>（<a href=../13.2/ >第 13.2 节</a>）。</p> <p><strong>问题 4.1</strong> <code>int</code> 和 <code>int64</code> 是相同的类型吗？</p> <h3 id=4522>4.5.2.2 复数<a class=headerlink href=#4522 title="Permanent link">&para;</a></h3> <p>Go 拥有以下复数类型：</p> <div class="language-text highlight"><pre><span></span><code>complex64 (32 位实数和虚数)
complex128 (64 位实数和虚数)
</code></pre></div> <p>复数使用 <code>re+imI</code> 来表示，其中 <code>re</code> 代表实数部分，<code>im</code> 代表虚数部分，<code>I</code> 代表根号负 1。</p> <p>示例：</p> <div class="language-go highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=kd>var</span><span class=w> </span><span class=nx>c1</span><span class=w> </span><span class=kt>complex64</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=mi>5</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=m>10i</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=nx>fmt</span><span class=p>.</span><span class=nx>Printf</span><span class=p>(</span><span class=s>&quot;The value is: %v&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>c1</span><span class=p>)</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=c1>// 输出： 5 + 10i</span>
</span></code></pre></div> <p>如果 <code>re</code> 和 <code>im</code> 的类型均为 <code>float32</code>，那么类型为 <code>complex64</code> 的复数 <code>c</code> 可以通过以下方式来获得：</p> <div class="language-go highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=nx>c</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=nb>complex</span><span class=p>(</span><span class=nx>re</span><span class=p>,</span><span class=w> </span><span class=nx>im</span><span class=p>)</span>
</span></code></pre></div> <p>函数 <code>real(c)</code> 和 <code>imag(c)</code> 可以分别获得相应的实数和虚数部分。</p> <p>在使用格式化说明符时，可以使用 <code>%v</code> 来表示复数，但当你希望只表示其中的一个部分的时候需要使用 <code>%f</code>。</p> <p>复数支持和其它数字类型一样的运算。当你使用等号 <code>==</code> 或者不等号 <code>!=</code> 对复数进行比较运算时，注意对精确度的把握。<code>cmath</code> 包中包含了一些操作复数的公共方法。如果你对内存的要求不是特别高，最好使用 <code>complex128</code> 作为计算类型，因为相关函数都使用这个类型的参数。</p> <h3 id=4523>4.5.2.3 位运算<a class=headerlink href=#4523 title="Permanent link">&para;</a></h3> <p>位运算只能用于整数类型的变量，且需当它们拥有等长位模式时。</p> <p><code>%b</code> 是用于表示位的格式化标识符。</p> <p><strong>二元运算符</strong></p> <ul> <li> <p>按位与 <code>&amp;</code>：</p> <p>对应位置上的值经过和运算结果，具体参见和运算符（第 4.5.1 节），并将 T (true) 替换为 <code>1</code>，将 F (false) 替换为 <code>0</code></p> <div class="language-text highlight"><pre><span></span><code>1 &amp; 1 -&gt; 1
1 &amp; 0 -&gt; 0
0 &amp; 1 -&gt; 0
0 &amp; 0 -&gt; 0
</code></pre></div> </li> <li> <p>按位或 <code>|</code>：</p> <p>对应位置上的值经过或运算结果，具体参见或运算符（第 4.5.1 节），并将 T (true) 替换为 <code>1</code>，将 F (false) 替换为 <code>0</code></p> <div class="language-text highlight"><pre><span></span><code>1 | 1 -&gt; 1
1 | 0 -&gt; 1
0 | 1 -&gt; 1
0 | 0 -&gt; 0
</code></pre></div> </li> <li> <p>按位异或 <code>^</code>：</p> <p>对应位置上的值根据以下规则组合：</p> <div class="language-text highlight"><pre><span></span><code>1 ^ 1 -&gt; 0
1 ^ 0 -&gt; 1
0 ^ 1 -&gt; 1
0 ^ 0 -&gt; 0
</code></pre></div> </li> <li> <p>位清除 <code>&amp;^</code>：将指定位置上的值设置为 <code>0</code>。</p> <div class="language-go highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=kn>package</span><span class=w> </span><span class=nx>main</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=kn>import</span><span class=w> </span><span class=s>&quot;fmt&quot;</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=kd>func</span><span class=w> </span><span class=nx>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a><span class=w>    </span><span class=kd>var</span><span class=w> </span><span class=nx>x</span><span class=w> </span><span class=kt>uint8</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=mi>15</span>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a><span class=w>    </span><span class=kd>var</span><span class=w> </span><span class=nx>y</span><span class=w> </span><span class=kt>uint8</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=mi>4</span>
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a><span class=w>    </span><span class=nx>fmt</span><span class=p>.</span><span class=nx>Printf</span><span class=p>(</span><span class=s>&quot;%08b\n&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>x</span><span class=w> </span><span class=o>&amp;^</span><span class=w> </span><span class=nx>y</span><span class=p>);</span><span class=w>  </span><span class=c1>// 00001011</span>
</span><span id=__span-12-7><a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a><span class=p>}</span>
</span></code></pre></div> </li> </ul> <p><strong>一元运算符</strong></p> <ul> <li> <p>按位补足 <code>^</code>：</p> <p>该运算符与异或运算符一同使用，即 <code>m^x</code>，对于无符号 <code>x</code> 使用 “全部位设置为 1” 的规则，对于有符号 <code>x</code> 时使用 <code>m=-1</code>。例如：</p> <div class="language-text highlight"><pre><span></span><code>^10 = -01 ^ 10 = -11
</code></pre></div> </li> <li> <p>位左移 <code>&lt;&lt;</code>：</p> <ul> <li>用法：<code>bitP &lt;&lt; n</code>。</li> <li><code>bitP</code> 的位向左移动 <code>n</code> 位，右侧空白部分使用 0 填充；如果 <code>n</code> 等于 2，则结果是 2 的相应倍数，即 2 的 <code>n</code> 次方。例如：<div class="language-text highlight"><pre><span></span><code>1 &lt;&lt; 10 // 等于 1 KB
1 &lt;&lt; 20 // 等于 1 MB
1 &lt;&lt; 30 // 等于 1 GB
</code></pre></div> </li> </ul> </li> <li> <p>位右移 <code>&gt;&gt;</code>：</p> <ul> <li>用法：<code>bitP &gt;&gt; n</code>。</li> <li><code>bitP</code> 的位向右移动 <code>n</code> 位，左侧空白部分使用 0 填充；如果 <code>n</code> 等于 2，则结果是当前值除以 2 的 n 次方。</li> </ul> </li> </ul> <p>当希望把结果赋值给第一个操作数时，可以简写为 <code>a &lt;&lt;= 2</code> 或者 <code>b ^= a &amp; 0xffffffff</code>。</p> <p><strong>位左移常见实现存储单位的用例</strong></p> <p>使用位左移与 <code>iota</code> 计数配合可优雅地实现存储单位的常量枚举：</p> <div class="language-go highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=kd>type</span><span class=w> </span><span class=nx>ByteSize</span><span class=w> </span><span class=kt>float64</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=kd>const</span><span class=w> </span><span class=p>(</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=w>    </span><span class=nx>_</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=kc>iota</span><span class=w> </span><span class=c1>// 通过赋值给空白标识符来忽略值</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a><span class=w>    </span><span class=nx>KB</span><span class=w> </span><span class=nx>ByteSize</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=mi>1</span><span class=o>&lt;&lt;</span><span class=p>(</span><span class=mi>10</span><span class=o>*</span><span class=kc>iota</span><span class=p>)</span>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a><span class=w>    </span><span class=nx>MB</span>
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a><span class=w>    </span><span class=nx>GB</span>
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a><span class=w>    </span><span class=nx>TB</span>
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a><span class=w>    </span><span class=nx>PB</span>
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a><span class=w>    </span><span class=nx>EB</span>
</span><span id=__span-13-10><a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a><span class=w>    </span><span class=nx>ZB</span>
</span><span id=__span-13-11><a id=__codelineno-13-11 name=__codelineno-13-11 href=#__codelineno-13-11></a><span class=w>    </span><span class=nx>YB</span>
</span><span id=__span-13-12><a id=__codelineno-13-12 name=__codelineno-13-12 href=#__codelineno-13-12></a><span class=p>)</span>
</span></code></pre></div> <p><strong>在通讯中使用位左移表示标识的用例</strong></p> <div class="language-go highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=kd>type</span><span class=w> </span><span class=nx>BitFlag</span><span class=w> </span><span class=kt>int</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=kd>const</span><span class=w> </span><span class=p>(</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=w>    </span><span class=nx>Active</span><span class=w> </span><span class=nx>BitFlag</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=kc>iota</span><span class=w> </span><span class=c1>// 1 &lt;&lt; 0 == 1</span>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=w>    </span><span class=nx>Send</span><span class=w> </span><span class=c1>// 1 &lt;&lt; 1 == 2</span>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=w>    </span><span class=nx>Receive</span><span class=w> </span><span class=c1>// 1 &lt;&lt; 2 == 4</span>
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a><span class=p>)</span>
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a>
</span><span id=__span-14-8><a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a><span class=nx>flag</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>Active</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=nx>Send</span><span class=w> </span><span class=c1>// == 3</span>
</span></code></pre></div> <h3 id=4524>4.5.2.4 逻辑运算符<a class=headerlink href=#4524 title="Permanent link">&para;</a></h3> <p>Go 中拥有以下逻辑运算符：<code>==</code>、<code>!=</code>（第 4.5.1 节）、<code>&lt;</code>、<code>&lt;=</code>、<code>&gt;</code>、<code>&gt;=</code>。</p> <p>它们之所以被称为逻辑运算符是因为它们的运算结果总是为布尔值 <code>bool</code>。例如：</p> <div class="language-go highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=nx>b3</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=mi>10</span><span class=w> </span><span class=p>&gt;</span><span class=w> </span><span class=mi>5</span><span class=w> </span><span class=c1>// b3 is true</span>
</span></code></pre></div> <h3 id=4525>4.5.2.5 算术运算符<a class=headerlink href=#4525 title="Permanent link">&para;</a></h3> <p>常见可用于整数和浮点数的二元运算符有 <code>+</code>、<code>-</code>、<code>*</code> 和 <code>/</code>。</p> <p>（相对于一般规则而言，Go 在进行字符串拼接时允许使用对运算符 <code>+</code> 的重载，但 Go 本身不允许开发者进行自定义的运算符重载）</p> <p><code>/</code> 对于整数运算而言，结果依旧为整数，例如：<code>9 / 4 -&gt; 2</code>。</p> <p>取余运算符只能作用于整数：<code>9 % 4 -&gt; 1</code>。</p> <p>整数除以 0 可能导致程序崩溃，将会导致运行时的恐慌状态（如果除以 0 的行为在编译时就能被捕捉到，则会引发编译错误）；<a href=../13.0/ >第 13 章</a> 将会详细讲解如何正确地处理此类情况。</p> <p>浮点数除以 <code>0.0</code> 会返回一个无穷尽的结果，使用 <code>+Inf</code> 表示。</p> <p><strong>练习 4.4</strong> 尝试编译 <a href=../exercises/chapter_4/divby0.go>divby0.go</a>。</p> <p>你可以将语句 <code>b = b + a</code> 简写为 <code>b += a</code>，同样的写法也可用于 <code>-=</code>、<code>*=</code>、<code>/=</code>、<code>%=</code>。</p> <p>对于整数和浮点数，你可以使用一元运算符 <code>++</code>（递增）和 <code>--</code>（递减），但只能用于后缀：</p> <div class="language-text highlight"><pre><span></span><code>i++ -&gt; i += 1 -&gt; i = i + 1
i-- -&gt; i -= 1 -&gt; i = i - 1
</code></pre></div> <p>同时，带有 <code>++</code> 和 <code>--</code> 的只能作为语句，而非表达式，因此 <code>n = i++</code> 这种写法是无效的，其它像 <code>f(i++)</code> 或者 <code>a[i]=b[i++]</code> 这些可以用于 C、C++ 和 Java 中的写法在 Go 中也是不允许的。</p> <p>在运算时 <strong>溢出</strong> 不会产生错误，Go 会简单地将超出位数抛弃。如果你需要范围无限大的整数或者有理数（意味着只被限制于计算机内存），你可以使用标准库中的 <code>big</code> 包，该包提供了类似 <code>big.Int</code> 和 <code>big.Rat</code> 这样的类型（<a href=../09.4/ >第 9.4 节</a>）。</p> <h3 id=4526>4.5.2.6 随机数<a class=headerlink href=#4526 title="Permanent link">&para;</a></h3> <p>一些像游戏或者统计学类的应用需要用到随机数。<code>rand</code> 包实现了伪随机数的生成。</p> <p>示例 4.10 <a href=../examples/chapter_4/random.go>random.go</a> 演示了如何生成 10 个非负随机数：</p> <div class="language-go highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=kn>package</span><span class=w> </span><span class=nx>main</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=kn>import</span><span class=w> </span><span class=p>(</span>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a><span class=w>    </span><span class=s>&quot;fmt&quot;</span>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=w>    </span><span class=s>&quot;math/rand&quot;</span>
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a><span class=w>    </span><span class=s>&quot;time&quot;</span>
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a><span class=p>)</span>
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a>
</span><span id=__span-16-8><a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a><span class=kd>func</span><span class=w> </span><span class=nx>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-16-9><a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=nx>i</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=nx>i</span><span class=w> </span><span class=p>&lt;</span><span class=w> </span><span class=mi>10</span><span class=p>;</span><span class=w> </span><span class=nx>i</span><span class=o>++</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-16-10><a id=__codelineno-16-10 name=__codelineno-16-10 href=#__codelineno-16-10></a><span class=w>        </span><span class=nx>a</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>rand</span><span class=p>.</span><span class=nx>Int</span><span class=p>()</span>
</span><span id=__span-16-11><a id=__codelineno-16-11 name=__codelineno-16-11 href=#__codelineno-16-11></a><span class=w>        </span><span class=nx>fmt</span><span class=p>.</span><span class=nx>Printf</span><span class=p>(</span><span class=s>&quot;%d / &quot;</span><span class=p>,</span><span class=w> </span><span class=nx>a</span><span class=p>)</span>
</span><span id=__span-16-12><a id=__codelineno-16-12 name=__codelineno-16-12 href=#__codelineno-16-12></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-16-13><a id=__codelineno-16-13 name=__codelineno-16-13 href=#__codelineno-16-13></a><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=nx>i</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=nx>i</span><span class=w> </span><span class=p>&lt;</span><span class=w> </span><span class=mi>5</span><span class=p>;</span><span class=w> </span><span class=nx>i</span><span class=o>++</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-16-14><a id=__codelineno-16-14 name=__codelineno-16-14 href=#__codelineno-16-14></a><span class=w>        </span><span class=nx>r</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>rand</span><span class=p>.</span><span class=nx>Intn</span><span class=p>(</span><span class=mi>8</span><span class=p>)</span>
</span><span id=__span-16-15><a id=__codelineno-16-15 name=__codelineno-16-15 href=#__codelineno-16-15></a><span class=w>        </span><span class=nx>fmt</span><span class=p>.</span><span class=nx>Printf</span><span class=p>(</span><span class=s>&quot;%d / &quot;</span><span class=p>,</span><span class=w> </span><span class=nx>r</span><span class=p>)</span>
</span><span id=__span-16-16><a id=__codelineno-16-16 name=__codelineno-16-16 href=#__codelineno-16-16></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-16-17><a id=__codelineno-16-17 name=__codelineno-16-17 href=#__codelineno-16-17></a><span class=w>    </span><span class=nx>fmt</span><span class=p>.</span><span class=nx>Println</span><span class=p>()</span>
</span><span id=__span-16-18><a id=__codelineno-16-18 name=__codelineno-16-18 href=#__codelineno-16-18></a><span class=w>    </span><span class=nx>timens</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nb>int64</span><span class=p>(</span><span class=nx>time</span><span class=p>.</span><span class=nx>Now</span><span class=p>().</span><span class=nx>Nanosecond</span><span class=p>())</span>
</span><span id=__span-16-19><a id=__codelineno-16-19 name=__codelineno-16-19 href=#__codelineno-16-19></a><span class=w>    </span><span class=nx>rand</span><span class=p>.</span><span class=nx>Seed</span><span class=p>(</span><span class=nx>timens</span><span class=p>)</span>
</span><span id=__span-16-20><a id=__codelineno-16-20 name=__codelineno-16-20 href=#__codelineno-16-20></a><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=nx>i</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=nx>i</span><span class=w> </span><span class=p>&lt;</span><span class=w> </span><span class=mi>10</span><span class=p>;</span><span class=w> </span><span class=nx>i</span><span class=o>++</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-16-21><a id=__codelineno-16-21 name=__codelineno-16-21 href=#__codelineno-16-21></a><span class=w>        </span><span class=nx>fmt</span><span class=p>.</span><span class=nx>Printf</span><span class=p>(</span><span class=s>&quot;%2.2f / &quot;</span><span class=p>,</span><span class=w> </span><span class=mi>100</span><span class=o>*</span><span class=nx>rand</span><span class=p>.</span><span class=nx>Float32</span><span class=p>())</span>
</span><span id=__span-16-22><a id=__codelineno-16-22 name=__codelineno-16-22 href=#__codelineno-16-22></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-16-23><a id=__codelineno-16-23 name=__codelineno-16-23 href=#__codelineno-16-23></a><span class=p>}</span>
</span></code></pre></div> <p>可能的输出：</p> <div class="language-text highlight"><pre><span></span><code>816681689 / 1325201247 / 623951027 / 478285186 / 1654146165 /
1951252986 / 2029250107 / 762911244 / 1372544545 / 591415086 / / 3 / 0 / 6 / 4 / 2 /22.10
/ 65.77 / 65.89 / 16.85 / 75.56 / 46.90 / 55.24 / 55.95 / 25.58 / 70.61 /
</code></pre></div> <p>函数 <code>rand.Float32</code> 和 <code>rand.Float64</code> 返回介于 <span class=arithmatex>\([0.0, 1.0)\)</span> 之间的伪随机数，其中包括 <code>0.0</code> 但不包括 <code>1.0</code>。函数 <code>rand.Intn</code> 返回介于 <span class=arithmatex>\([0, n)\)</span> 之间的伪随机数。</p> <p>你可以使用 <code>rand.Seed(value)</code> 函数来提供伪随机数的生成种子，一般情况下都会使用当前时间的纳秒级数字（第 4.8 节）。</p> <h2 id=453>4.5.3 运算符与优先级<a class=headerlink href=#453 title="Permanent link">&para;</a></h2> <p>有些运算符拥有较高的优先级，二元运算符的运算方向均是从左至右。下表列出了所有运算符以及它们的优先级，由上至下代表优先级由高到低：</p> <div class="language-text highlight"><pre><span></span><code>优先级     运算符
 7      ^ !
 6      * / % &lt;&lt; &gt;&gt; &amp; &amp;^
 5      + - | ^
 4      == != &lt; &lt;= &gt;= &gt;
 3      &lt;-
 2      &amp;&amp;
 1      ||
</code></pre></div> <p>当然，你可以通过使用括号来临时提升某个表达式的整体运算优先级。</p> <h2 id=454>4.5.4 类型别名<a class=headerlink href=#454 title="Permanent link">&para;</a></h2> <p>当你在使用某个类型时，你可以给它起另一个名字，然后你就可以在你的代码中使用新的名字（用于简化名称或解决名称冲突）。</p> <p>在 <code>type TZ int</code> 中，<code>TZ</code> 就是 <code>int</code> 类型的新名称（用于表示程序中的时区），然后就可以使用 <code>TZ</code> 来操作 <code>int</code> 类型的数据。</p> <p>示例 4.11 <a href=../examples/chapter_4/type.go>type.go</a></p> <div class="language-go highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=kn>package</span><span class=w> </span><span class=nx>main</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a><span class=kn>import</span><span class=w> </span><span class=s>&quot;fmt&quot;</span>
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a><span class=kd>type</span><span class=w> </span><span class=nx>TZ</span><span class=w> </span><span class=kt>int</span>
</span><span id=__span-17-5><a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a>
</span><span id=__span-17-6><a id=__codelineno-17-6 name=__codelineno-17-6 href=#__codelineno-17-6></a><span class=kd>func</span><span class=w> </span><span class=nx>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-17-7><a id=__codelineno-17-7 name=__codelineno-17-7 href=#__codelineno-17-7></a><span class=w>    </span><span class=kd>var</span><span class=w> </span><span class=nx>a</span><span class=p>,</span><span class=w> </span><span class=nx>b</span><span class=w> </span><span class=nx>TZ</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>4</span>
</span><span id=__span-17-8><a id=__codelineno-17-8 name=__codelineno-17-8 href=#__codelineno-17-8></a><span class=w>    </span><span class=nx>c</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nx>a</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>b</span>
</span><span id=__span-17-9><a id=__codelineno-17-9 name=__codelineno-17-9 href=#__codelineno-17-9></a><span class=w>    </span><span class=nx>fmt</span><span class=p>.</span><span class=nx>Printf</span><span class=p>(</span><span class=s>&quot;c has the value: %d&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>c</span><span class=p>)</span><span class=w> </span><span class=c1>// 输出：c has the value: 7</span>
</span><span id=__span-17-10><a id=__codelineno-17-10 name=__codelineno-17-10 href=#__codelineno-17-10></a><span class=p>}</span>
</span></code></pre></div> <p>实际上，类型别名得到的新类型并非和原类型完全相同，新类型不会拥有原类型所附带的方法（<a href=../10.0/ >第 10 章</a>）；<code>TZ</code> 可以自定义一个方法用来输出更加人性化的时区信息。</p> <p><strong>练习 4.5</strong> 定义一个 <code>string</code> 的类型别名 <code>Rope</code>，并声明一个该类型的变量。</p> <h2 id=455>4.5.5 字符类型<a class=headerlink href=#455 title="Permanent link">&para;</a></h2> <p>严格来说，这并不是 Go 语言的一个类型，字符只是整数的特殊用例。<code>byte</code> 类型是 <code>uint8</code> 的别名，对于只占用 1 个字节的传统 ASCII 编码的字符来说，完全没有问题。例如：<code>var ch byte = 'A'</code>；字符使用单引号括起来。</p> <p>在 ASCII 码表中，<code>'A'</code> 的值是 <code>65</code>，而使用 16 进制表示则为 <code>41</code>，所以下面的写法是等效的：</p> <div class="language-go highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=kd>var</span><span class=w> </span><span class=nx>ch</span><span class=w> </span><span class=kt>byte</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=mi>65</span><span class=w> </span><span class=nx>或</span><span class=w> </span><span class=kd>var</span><span class=w> </span><span class=nx>ch</span><span class=w> </span><span class=kt>byte</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=sc>&#39;\x41&#39;</span>
</span></code></pre></div> <p>（<code>\x</code> 总是紧跟着长度为 2 的 16 进制数）</p> <p>另外一种可能的写法是 <code>\</code> 后面紧跟着长度为 3 的 8 进制数，例如：<code>\377</code>。</p> <p>不过 Go 同样支持 Unicode（UTF-8），因此字符同样称为 Unicode 代码点或者 runes，并在内存中使用 <code>int</code> 来表示。在文档中，一般使用格式 <code>U+hhhh</code> 来表示，其中 <code>h</code> 表示一个 16 进制数。其实 <code>rune</code> 也是 Go 当中的一个类型，并且是 <code>int32</code> 的别名。</p> <p>在书写 Unicode 字符时，需要在 16 进制数之前加上前缀 <code>\u</code> 或者 <code>\U</code>。</p> <p>因为 Unicode 至少占用 2 个字节，所以我们使用 <code>int16</code> 或者 <code>int</code> 类型来表示。如果需要使用到 4 字节，则会加上 <code>\U</code> 前缀；前缀 <code>\u</code> 则总是紧跟着长度为 4 的 16 进制数，前缀 <code>\U</code> 紧跟着长度为 8 的 16 进制数。</p> <p>示例 4.12 <a href=../examples/chapter_4/char.go>char.go</a></p> <div class="language-go highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=kd>var</span><span class=w> </span><span class=nx>ch</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=sc>&#39;\u0041&#39;</span>
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a><span class=kd>var</span><span class=w> </span><span class=nx>ch2</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=sc>&#39;\u03B2&#39;</span>
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a><span class=kd>var</span><span class=w> </span><span class=nx>ch3</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=sc>&#39;\U00101234&#39;</span>
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a><span class=nx>fmt</span><span class=p>.</span><span class=nx>Printf</span><span class=p>(</span><span class=s>&quot;%d - %d - %d\n&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>ch</span><span class=p>,</span><span class=w> </span><span class=nx>ch2</span><span class=p>,</span><span class=w> </span><span class=nx>ch3</span><span class=p>)</span><span class=w> </span><span class=c1>// integer</span>
</span><span id=__span-19-5><a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a><span class=nx>fmt</span><span class=p>.</span><span class=nx>Printf</span><span class=p>(</span><span class=s>&quot;%c - %c - %c\n&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>ch</span><span class=p>,</span><span class=w> </span><span class=nx>ch2</span><span class=p>,</span><span class=w> </span><span class=nx>ch3</span><span class=p>)</span><span class=w> </span><span class=c1>// character</span>
</span><span id=__span-19-6><a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a><span class=nx>fmt</span><span class=p>.</span><span class=nx>Printf</span><span class=p>(</span><span class=s>&quot;%X - %X - %X\n&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>ch</span><span class=p>,</span><span class=w> </span><span class=nx>ch2</span><span class=p>,</span><span class=w> </span><span class=nx>ch3</span><span class=p>)</span><span class=w> </span><span class=c1>// UTF-8 bytes</span>
</span><span id=__span-19-7><a id=__codelineno-19-7 name=__codelineno-19-7 href=#__codelineno-19-7></a><span class=nx>fmt</span><span class=p>.</span><span class=nx>Printf</span><span class=p>(</span><span class=s>&quot;%U - %U - %U&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>ch</span><span class=p>,</span><span class=w> </span><span class=nx>ch2</span><span class=p>,</span><span class=w> </span><span class=nx>ch3</span><span class=p>)</span><span class=w> </span><span class=c1>// UTF-8 code point</span>
</span></code></pre></div> <p>输出：</p> <div class="language-text highlight"><pre><span></span><code>65 - 946 - 1053236
A - β - r
41 - 3B2 - 101234
U+0041 - U+03B2 - U+101234
</code></pre></div> <p>格式化说明符 <code>%c</code> 用于表示字符；当和字符配合使用时，<code>%v</code> 或 <code>%d</code> 会输出用于表示该字符的整数；<code>%U</code> 输出格式为 <code>U+hhhh</code> 的字符串（另一个示例见<a href=../05.4/ >第 5.4.4 节</a>）。</p> <p>包 <code>unicode</code> 包含了一些针对测试字符的非常有用的函数（其中 <code>ch</code> 代表字符）：</p> <ul> <li>判断是否为字母：<code>unicode.IsLetter(ch)</code></li> <li>判断是否为数字：<code>unicode.IsDigit(ch)</code></li> <li>判断是否为空白符号：<code>unicode.IsSpace(ch)</code></li> </ul> <p>这些函数返回单个布尔值。包 <code>utf8</code> 拥有更多与 <code>rune</code> 类型相关的函数。</p> <p>（ <strong>译者注：关于类型的相关讲解，可参考视频教程 《Go编程基础》 第 3 课：<a href=https://github.com/Unknwon/go-fundamental-programming/blob/master/lectures/lecture3.md>类型与变量</a></strong> ）</p> <h2 id=_1>链接<a class=headerlink href=#_1 title="Permanent link">&para;</a></h2> <ul> <li><a href=../directory/ >目录</a></li> <li>上一节：<a href=../04.4/ >变量</a></li> <li>下一节：<a href=../04.6/ >字符串</a></li> </ul></div> </div> <footer class="col-md-12 text-center"> <hr> <p> <small>Cinder is licensed under the <a href=https://github.com/chrissimpkins/cinder/blob/master/LICENSE.md>MIT license</a></small><br> <small>Documentation built with <a href=http://www.mkdocs.org/ >MkDocs</a>.</small> </p> </footer> <script src=//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js></script> <script src=../js/bootstrap-3.0.3.min.js></script> <script src=//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/highlight.min.js></script> <script>hljs.initHighlightingOnLoad();</script> <script>var base_url = ".."</script> <script src=../js/base.js></script> <script src=../search/main.js></script> <div class=modal id=mkdocs_search_modal tabindex=-1 role=dialog aria-labelledby=searchModalLabel aria-hidden=true> <div class="modal-dialog modal-lg"> <div class=modal-content> <div class=modal-header> <button type=button class=close data-dismiss=modal> <span aria-hidden=true>&times;</span> <span class=sr-only>Close</span> </button> <h4 class=modal-title id=searchModalLabel>Search</h4> </div> <div class=modal-body> <p> From here you can search these documents. Enter your search terms below. </p> <form> <div class=form-group> <input type=text class=form-control placeholder=Search... id=mkdocs-search-query title="Type search term here"> </div> </form> <div id=mkdocs-search-results></div> </div> <div class=modal-footer> </div> </div> </div> </div><div class=modal id=mkdocs_keyboard_modal tabindex=-1 role=dialog aria-labelledby=keyboardModalLabel aria-hidden=true> <div class=modal-dialog> <div class=modal-content> <div class=modal-header> <h4 class=modal-title id=keyboardModalLabel>Keyboard Shortcuts</h4> <button type=button class=close data-dismiss=modal><span aria-hidden=true>&times;</span><span class=sr-only>Close</span></button> </div> <div class=modal-body> <table class=table> <thead> <tr> <th style="width: 20%;">Keys</th> <th>Action</th> </tr> </thead> <tbody> <tr> <td class="help shortcut"><kbd>?</kbd></td> <td>Open this help</td> </tr> <tr> <td class="next shortcut"><kbd>n</kbd></td> <td>Next page</td> </tr> <tr> <td class="prev shortcut"><kbd>p</kbd></td> <td>Previous page</td> </tr> <tr> <td class="search shortcut"><kbd>s</kbd></td> <td>Search</td> </tr> </tbody> </table> </div> <div class=modal-footer> </div> </div> </div> </div> </body> </html> 